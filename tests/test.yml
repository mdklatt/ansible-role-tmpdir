## Test playbook for the tmpdir role.

- hosts: test

  roles:
  - role: tmpdir

  pre_tasks:
  - name: create root directory
    # The test itself is run inside a temporary directory, so there is no need
    # to remove this.
    file:
      path: "{{ tmpdir_root }}"
      state: directory
    
  post_tasks:
  - name: verify that directory does not exist
    # This must run after the tmpdir handler.
    stat:
      path: "{{ tmpdir_path }}"
    register: task
    failed_when: task.stat.exists
